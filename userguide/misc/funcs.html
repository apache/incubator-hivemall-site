
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>List of Functions Â· Hivemall User Manual</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-etoc/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-callouts/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-toggle-chapters/toggle.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-codeblock-filename/block.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-multipart/multipart.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-emphasize/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-api/theme-api.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../tips/" />
    
    
    <link rel="prev" href="../getting_started/input-format.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://hivemall.incubator.apache.org/" target="_blank" class="custom-link"><i class="fa fa-home"></i> Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        <li class="header">TABLE OF CONTENTS</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                        <b>1.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../getting_started/">
            
                <a href="../getting_started/">
            
                    
                        <b>1.2.</b>
                    
                    Getting Started
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../getting_started/installation.html">
            
                <a href="../getting_started/installation.html">
            
                    
                        <b>1.2.1.</b>
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../getting_started/permanent-functions.html">
            
                <a href="../getting_started/permanent-functions.html">
            
                    
                        <b>1.2.2.</b>
                    
                    Install as permanent functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../getting_started/input-format.html">
            
                <a href="../getting_started/input-format.html">
            
                    
                        <b>1.2.3.</b>
                    
                    Input Format
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.3" data-path="funcs.html">
            
                <a href="funcs.html">
            
                    
                        <b>1.3.</b>
                    
                    List of Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../tips/">
            
                <a href="../tips/">
            
                    
                        <b>1.4.</b>
                    
                    Tips for Effective Hivemall
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../tips/addbias.html">
            
                <a href="../tips/addbias.html">
            
                    
                        <b>1.4.1.</b>
                    
                    Explicit add_bias() for better prediction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../tips/rand_amplify.html">
            
                <a href="../tips/rand_amplify.html">
            
                    
                        <b>1.4.2.</b>
                    
                    Use rand_amplify() to better prediction results
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../tips/rt_prediction.html">
            
                <a href="../tips/rt_prediction.html">
            
                    
                        <b>1.4.3.</b>
                    
                    Real-time prediction on RDBMS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../tips/ensemble_learning.html">
            
                <a href="../tips/ensemble_learning.html">
            
                    
                        <b>1.4.4.</b>
                    
                    Ensemble learning for stable prediction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../tips/mixserver.html">
            
                <a href="../tips/mixserver.html">
            
                    
                        <b>1.4.5.</b>
                    
                    Mixing models for a better prediction convergence (MIX server)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../tips/emr.html">
            
                <a href="../tips/emr.html">
            
                    
                        <b>1.4.6.</b>
                    
                    Run Hivemall on Amazon Elastic MapReduce
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../tips/general_tips.html">
            
                <a href="../tips/general_tips.html">
            
                    
                        <b>1.5.</b>
                    
                    General Hive/Hadoop Tips
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../tips/rowid.html">
            
                <a href="../tips/rowid.html">
            
                    
                        <b>1.5.1.</b>
                    
                    Adding rowid for each row
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../tips/hadoop_tuning.html">
            
                <a href="../tips/hadoop_tuning.html">
            
                    
                        <b>1.5.2.</b>
                    
                    Hadoop tuning for Hivemall
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../troubleshooting/">
            
                <a href="../troubleshooting/">
            
                    
                        <b>1.6.</b>
                    
                    Troubleshooting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../troubleshooting/oom.html">
            
                <a href="../troubleshooting/oom.html">
            
                    
                        <b>1.6.1.</b>
                    
                    OutOfMemoryError in training
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../troubleshooting/mapjoin_task_error.html">
            
                <a href="../troubleshooting/mapjoin_task_error.html">
            
                    
                        <b>1.6.2.</b>
                    
                    SemanticException generate map join task error: Cannot serialize object
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../troubleshooting/asterisk.html">
            
                <a href="../troubleshooting/asterisk.html">
            
                    
                        <b>1.6.3.</b>
                    
                    Asterisk argument for UDTF does not work
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../troubleshooting/num_mappers.html">
            
                <a href="../troubleshooting/num_mappers.html">
            
                    
                        <b>1.6.4.</b>
                    
                    The number of mappers is less than input splits in Hadoop 2.x
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../troubleshooting/mapjoin_classcastex.html">
            
                <a href="../troubleshooting/mapjoin_classcastex.html">
            
                    
                        <b>1.6.5.</b>
                    
                    Map-side join causes ClassCastException on Tez
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part II - Generic Features</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="generic_funcs.html">
            
                <a href="generic_funcs.html">
            
                    
                        <b>2.1.</b>
                    
                    List of Generic Hivemall Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="topk.html">
            
                <a href="topk.html">
            
                    
                        <b>2.2.</b>
                    
                    Efficient Top-K Query Processing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="tokenizer.html">
            
                <a href="tokenizer.html">
            
                    
                        <b>2.3.</b>
                    
                    Text Tokenizer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="approx.html">
            
                <a href="approx.html">
            
                    
                        <b>2.4.</b>
                    
                    Approximate Aggregate Functions
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part III - Feature Engineering</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../ft_engineering/scaling.html">
            
                <a href="../ft_engineering/scaling.html">
            
                    
                        <b>3.1.</b>
                    
                    Feature Scaling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../ft_engineering/hashing.html">
            
                <a href="../ft_engineering/hashing.html">
            
                    
                        <b>3.2.</b>
                    
                    Feature Hashing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../ft_engineering/selection.html">
            
                <a href="../ft_engineering/selection.html">
            
                    
                        <b>3.3.</b>
                    
                    Feature Selection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../ft_engineering/binning.html">
            
                <a href="../ft_engineering/binning.html">
            
                    
                        <b>3.4.</b>
                    
                    Feature Binning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../ft_engineering/pairing.html">
            
                <a href="../ft_engineering/pairing.html">
            
                    
                        <b>3.5.</b>
                    
                    Feature Paring
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.5.1" data-path="../ft_engineering/polynomial.html">
            
                <a href="../ft_engineering/polynomial.html">
            
                    
                        <b>3.5.1.</b>
                    
                    Polynomial features
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="../ft_engineering/ft_trans.html">
            
                <a href="../ft_engineering/ft_trans.html">
            
                    
                        <b>3.6.</b>
                    
                    Feature Transformation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.6.1" data-path="../ft_engineering/vectorization.html">
            
                <a href="../ft_engineering/vectorization.html">
            
                    
                        <b>3.6.1.</b>
                    
                    Feature vectorization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.2" data-path="../ft_engineering/quantify.html">
            
                <a href="../ft_engineering/quantify.html">
            
                    
                        <b>3.6.2.</b>
                    
                    Quantify non-number features
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.3" data-path="../ft_engineering/binarize.html">
            
                <a href="../ft_engineering/binarize.html">
            
                    
                        <b>3.6.3.</b>
                    
                    Binarize label
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.4" data-path="../ft_engineering/onehot.html">
            
                <a href="../ft_engineering/onehot.html">
            
                    
                        <b>3.6.4.</b>
                    
                    One-hot encoding
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="../ft_engineering/term_vector.html">
            
                <a href="../ft_engineering/term_vector.html">
            
                    
                        <b>3.7.</b>
                    
                    Term Vector Model
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.1" data-path="../ft_engineering/tfidf.html">
            
                <a href="../ft_engineering/tfidf.html">
            
                    
                        <b>3.7.1.</b>
                    
                    TF-IDF Term Weighting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7.2" data-path="../ft_engineering/bm25.html">
            
                <a href="../ft_engineering/bm25.html">
            
                    
                        <b>3.7.2.</b>
                    
                    Okapi BM25 Term Weighting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part IV - Evaluation</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../eval/binary_classification_measures.html">
            
                <a href="../eval/binary_classification_measures.html">
            
                    
                        <b>4.1.</b>
                    
                    Binary Classification Metrics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../eval/auc.html">
            
                <a href="../eval/auc.html">
            
                    
                        <b>4.1.1.</b>
                    
                    Area under the ROC curve
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../eval/multilabel_classification_measures.html">
            
                <a href="../eval/multilabel_classification_measures.html">
            
                    
                        <b>4.2.</b>
                    
                    Multi-label Classification Metrics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../eval/regression.html">
            
                <a href="../eval/regression.html">
            
                    
                        <b>4.3.</b>
                    
                    Regression Metrics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../eval/rank.html">
            
                <a href="../eval/rank.html">
            
                    
                        <b>4.4.</b>
                    
                    Ranking Measures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../eval/datagen.html">
            
                <a href="../eval/datagen.html">
            
                    
                        <b>4.5.</b>
                    
                    Data Generation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.5.1" data-path="../eval/lr_datagen.html">
            
                <a href="../eval/lr_datagen.html">
            
                    
                        <b>4.5.1.</b>
                    
                    Logistic Regression data generation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part V - Supervised Learning</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../supervised_learning/prediction.html">
            
                <a href="../supervised_learning/prediction.html">
            
                    
                        <b>5.1.</b>
                    
                    How Prediction Works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../supervised_learning/tutorial.html">
            
                <a href="../supervised_learning/tutorial.html">
            
                    
                        <b>5.2.</b>
                    
                    Step-by-Step Tutorial on Supervised Learning
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part VI - Binary Classification</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../binaryclass/general.html">
            
                <a href="../binaryclass/general.html">
            
                    
                        <b>6.1.</b>
                    
                    Binary Classification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="../binaryclass/a9a.html">
            
                <a href="../binaryclass/a9a.html">
            
                    
                        <b>6.2.</b>
                    
                    a9a Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.2.1" data-path="../binaryclass/a9a_dataset.html">
            
                <a href="../binaryclass/a9a_dataset.html">
            
                    
                        <b>6.2.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.2" data-path="../binaryclass/a9a_generic.html">
            
                <a href="../binaryclass/a9a_generic.html">
            
                    
                        <b>6.2.2.</b>
                    
                    General Binary Classifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.3" data-path="../binaryclass/a9a_lr.html">
            
                <a href="../binaryclass/a9a_lr.html">
            
                    
                        <b>6.2.3.</b>
                    
                    Logistic Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.4" data-path="../binaryclass/a9a_minibatch.html">
            
                <a href="../binaryclass/a9a_minibatch.html">
            
                    
                        <b>6.2.4.</b>
                    
                    Mini-batch Gradient Descent
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="../binaryclass/news20.html">
            
                <a href="../binaryclass/news20.html">
            
                    
                        <b>6.3.</b>
                    
                    News20 Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.3.1" data-path="../binaryclass/news20_dataset.html">
            
                <a href="../binaryclass/news20_dataset.html">
            
                    
                        <b>6.3.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.2" data-path="../binaryclass/news20_pa.html">
            
                <a href="../binaryclass/news20_pa.html">
            
                    
                        <b>6.3.2.</b>
                    
                    Perceptron, Passive Aggressive
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.3" data-path="../binaryclass/news20_scw.html">
            
                <a href="../binaryclass/news20_scw.html">
            
                    
                        <b>6.3.3.</b>
                    
                    CW, AROW, SCW
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.4" data-path="../binaryclass/news20_generic.html">
            
                <a href="../binaryclass/news20_generic.html">
            
                    
                        <b>6.3.4.</b>
                    
                    General Binary Classifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.5" data-path="../binaryclass/news20_generic_bagging.html">
            
                <a href="../binaryclass/news20_generic_bagging.html">
            
                    
                        <b>6.3.5.</b>
                    
                    Baggnig classiers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.6" data-path="../binaryclass/news20_adagrad.html">
            
                <a href="../binaryclass/news20_adagrad.html">
            
                    
                        <b>6.3.6.</b>
                    
                    AdaGradRDA, AdaGrad, AdaDelta
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.7" data-path="../binaryclass/news20_rf.html">
            
                <a href="../binaryclass/news20_rf.html">
            
                    
                        <b>6.3.7.</b>
                    
                    Random Forest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3.8" data-path="../binaryclass/news20b_xgboost.html">
            
                <a href="../binaryclass/news20b_xgboost.html">
            
                    
                        <b>6.3.8.</b>
                    
                    XGBoost
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="../binaryclass/kdd2010a.html">
            
                <a href="../binaryclass/kdd2010a.html">
            
                    
                        <b>6.4.</b>
                    
                    KDD2010a Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.4.1" data-path="../binaryclass/kdd2010a_dataset.html">
            
                <a href="../binaryclass/kdd2010a_dataset.html">
            
                    
                        <b>6.4.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4.2" data-path="../binaryclass/kdd2010a_scw.html">
            
                <a href="../binaryclass/kdd2010a_scw.html">
            
                    
                        <b>6.4.2.</b>
                    
                    PA, CW, AROW, SCW
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="../binaryclass/kdd2010b.html">
            
                <a href="../binaryclass/kdd2010b.html">
            
                    
                        <b>6.5.</b>
                    
                    KDD2010b Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.5.1" data-path="../binaryclass/kdd2010b_dataset.html">
            
                <a href="../binaryclass/kdd2010b_dataset.html">
            
                    
                        <b>6.5.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5.2" data-path="../binaryclass/kdd2010b_arow.html">
            
                <a href="../binaryclass/kdd2010b_arow.html">
            
                    
                        <b>6.5.2.</b>
                    
                    AROW
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.6" data-path="../binaryclass/webspam.html">
            
                <a href="../binaryclass/webspam.html">
            
                    
                        <b>6.6.</b>
                    
                    Webspam Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.6.1" data-path="../binaryclass/webspam_dataset.html">
            
                <a href="../binaryclass/webspam_dataset.html">
            
                    
                        <b>6.6.1.</b>
                    
                    Data Pareparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.6.2" data-path="../binaryclass/webspam_scw.html">
            
                <a href="../binaryclass/webspam_scw.html">
            
                    
                        <b>6.6.2.</b>
                    
                    PA1, AROW, SCW
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="../binaryclass/titanic_rf.html">
            
                <a href="../binaryclass/titanic_rf.html">
            
                    
                        <b>6.7.</b>
                    
                    Kaggle Titanic Tutorial
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="../binaryclass/criteo.html">
            
                <a href="../binaryclass/criteo.html">
            
                    
                        <b>6.8.</b>
                    
                    Criteo Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.8.1" data-path="../binaryclass/criteo_dataset.html">
            
                <a href="../binaryclass/criteo_dataset.html">
            
                    
                        <b>6.8.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.8.2" data-path="../binaryclass/criteo_ffm.html">
            
                <a href="../binaryclass/criteo_ffm.html">
            
                    
                        <b>6.8.2.</b>
                    
                    Field-Aware Factorization Machines
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part VII - Multiclass Classification</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../multiclass/news20.html">
            
                <a href="../multiclass/news20.html">
            
                    
                        <b>7.1.</b>
                    
                    News20 Multiclass Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.1" data-path="../multiclass/news20_dataset.html">
            
                <a href="../multiclass/news20_dataset.html">
            
                    
                        <b>7.1.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.2" data-path="../multiclass/news20_one-vs-the-rest_dataset.html">
            
                <a href="../multiclass/news20_one-vs-the-rest_dataset.html">
            
                    
                        <b>7.1.2.</b>
                    
                    Data Preparation for one-vs-the-rest classifiers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.3" data-path="../multiclass/news20_pa.html">
            
                <a href="../multiclass/news20_pa.html">
            
                    
                        <b>7.1.3.</b>
                    
                    PA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.4" data-path="../multiclass/news20_scw.html">
            
                <a href="../multiclass/news20_scw.html">
            
                    
                        <b>7.1.4.</b>
                    
                    CW, AROW, SCW
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.5" data-path="../multiclass/news20_xgboost.html">
            
                <a href="../multiclass/news20_xgboost.html">
            
                    
                        <b>7.1.5.</b>
                    
                    XGBoost
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.6" data-path="../multiclass/news20_ensemble.html">
            
                <a href="../multiclass/news20_ensemble.html">
            
                    
                        <b>7.1.6.</b>
                    
                    Ensemble learning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.7" data-path="../multiclass/news20_one-vs-the-rest.html">
            
                <a href="../multiclass/news20_one-vs-the-rest.html">
            
                    
                        <b>7.1.7.</b>
                    
                    one-vs-the-rest Classifier
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../multiclass/iris.html">
            
                <a href="../multiclass/iris.html">
            
                    
                        <b>7.2.</b>
                    
                    Iris Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.2.1" data-path="../multiclass/iris_dataset.html">
            
                <a href="../multiclass/iris_dataset.html">
            
                    
                        <b>7.2.1.</b>
                    
                    Data preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2.2" data-path="../multiclass/iris_scw.html">
            
                <a href="../multiclass/iris_scw.html">
            
                    
                        <b>7.2.2.</b>
                    
                    SCW
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2.3" data-path="../multiclass/iris_randomforest.html">
            
                <a href="../multiclass/iris_randomforest.html">
            
                    
                        <b>7.2.3.</b>
                    
                    Random Forest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2.4" data-path="../multiclass/iris_xgboost.html">
            
                <a href="../multiclass/iris_xgboost.html">
            
                    
                        <b>7.2.4.</b>
                    
                    XGBoost
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part VIII - Regression</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../regression/general.html">
            
                <a href="../regression/general.html">
            
                    
                        <b>8.1.</b>
                    
                    Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="../regression/e2006.html">
            
                <a href="../regression/e2006.html">
            
                    
                        <b>8.2.</b>
                    
                    E2006-tfidf Regression Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.2.1" data-path="../regression/e2006_dataset.html">
            
                <a href="../regression/e2006_dataset.html">
            
                    
                        <b>8.2.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2.2" data-path="../regression/e2006_generic.html">
            
                <a href="../regression/e2006_generic.html">
            
                    
                        <b>8.2.2.</b>
                    
                    General Regessor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2.3" data-path="../regression/e2006_arow.html">
            
                <a href="../regression/e2006_arow.html">
            
                    
                        <b>8.2.3.</b>
                    
                    Passive Aggressive, AROW
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2.4" data-path="../regression/e2006_xgboost.html">
            
                <a href="../regression/e2006_xgboost.html">
            
                    
                        <b>8.2.4.</b>
                    
                    XGBoost
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="../regression/kddcup12tr2.html">
            
                <a href="../regression/kddcup12tr2.html">
            
                    
                        <b>8.3.</b>
                    
                    KDDCup 2012 Track 2 CTR Prediction Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.3.1" data-path="../regression/kddcup12tr2_dataset.html">
            
                <a href="../regression/kddcup12tr2_dataset.html">
            
                    
                        <b>8.3.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.3.2" data-path="../regression/kddcup12tr2_lr.html">
            
                <a href="../regression/kddcup12tr2_lr.html">
            
                    
                        <b>8.3.2.</b>
                    
                    Logistic Regression, Passive Aggressive
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.3.3" data-path="../regression/kddcup12tr2_lr_amplify.html">
            
                <a href="../regression/kddcup12tr2_lr_amplify.html">
            
                    
                        <b>8.3.3.</b>
                    
                    Logistic Regression with amplifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.3.4" data-path="../regression/kddcup12tr2_adagrad.html">
            
                <a href="../regression/kddcup12tr2_adagrad.html">
            
                    
                        <b>8.3.4.</b>
                    
                    AdaGrad, AdaDelta
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part IX - Recommendation</li>
        
        
    
        <li class="chapter " data-level="9.1" data-path="../recommend/cf.html">
            
                <a href="../recommend/cf.html">
            
                    
                        <b>9.1.</b>
                    
                    Collaborative Filtering
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1.1" data-path="../recommend/item_based_cf.html">
            
                <a href="../recommend/item_based_cf.html">
            
                    
                        <b>9.1.1.</b>
                    
                    Item-based Collaborative Filtering
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="../recommend/news20.html">
            
                <a href="../recommend/news20.html">
            
                    
                        <b>9.2.</b>
                    
                    News20 Related Article Recommendation Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.2.1" data-path="../multiclass/news20_dataset.html">
            
                <a href="../multiclass/news20_dataset.html">
            
                    
                        <b>9.2.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2.2" data-path="../recommend/news20_jaccard.html">
            
                <a href="../recommend/news20_jaccard.html">
            
                    
                        <b>9.2.2.</b>
                    
                    LSH/MinHash and Jaccard Similarity
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2.3" data-path="../recommend/news20_knn.html">
            
                <a href="../recommend/news20_knn.html">
            
                    
                        <b>9.2.3.</b>
                    
                    LSH/MinHash and Brute-force Search
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2.4" data-path="../recommend/news20_bbit_minhash.html">
            
                <a href="../recommend/news20_bbit_minhash.html">
            
                    
                        <b>9.2.4.</b>
                    
                    kNN search using b-Bits MinHash
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="../recommend/movielens.html">
            
                <a href="../recommend/movielens.html">
            
                    
                        <b>9.3.</b>
                    
                    MovieLens Movie Recommendation Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.3.1" data-path="../recommend/movielens_dataset.html">
            
                <a href="../recommend/movielens_dataset.html">
            
                    
                        <b>9.3.1.</b>
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3.2" data-path="../recommend/movielens_cf.html">
            
                <a href="../recommend/movielens_cf.html">
            
                    
                        <b>9.3.2.</b>
                    
                    Item-based Collaborative Filtering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3.3" data-path="../recommend/movielens_mf.html">
            
                <a href="../recommend/movielens_mf.html">
            
                    
                        <b>9.3.3.</b>
                    
                    Matrix Factorization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3.4" data-path="../recommend/movielens_fm.html">
            
                <a href="../recommend/movielens_fm.html">
            
                    
                        <b>9.3.4.</b>
                    
                    Factorization Machine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3.5" data-path="../recommend/movielens_slim.html">
            
                <a href="../recommend/movielens_slim.html">
            
                    
                        <b>9.3.5.</b>
                    
                    SLIM for fast top-k Recommendation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3.6" data-path="../recommend/movielens_cv.html">
            
                <a href="../recommend/movielens_cv.html">
            
                    
                        <b>9.3.6.</b>
                    
                    10-fold Cross Validation (Matrix Factorization)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part X - Anomaly Detection</li>
        
        
    
        <li class="chapter " data-level="10.1" data-path="../anomaly/lof.html">
            
                <a href="../anomaly/lof.html">
            
                    
                        <b>10.1.</b>
                    
                    Outlier Detection using Local Outlier Factor (LOF)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="../anomaly/sst.html">
            
                <a href="../anomaly/sst.html">
            
                    
                        <b>10.2.</b>
                    
                    Change-Point Detection using Singular Spectrum Transformation (SST)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="../anomaly/changefinder.html">
            
                <a href="../anomaly/changefinder.html">
            
                    
                        <b>10.3.</b>
                    
                    ChangeFinder: Detecting Outlier and Change-Point Simultaneously
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part XI - Clustering</li>
        
        
    
        <li class="chapter " data-level="11.1" data-path="../clustering/lda.html">
            
                <a href="../clustering/lda.html">
            
                    
                        <b>11.1.</b>
                    
                    Latent Dirichlet Allocation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.2" data-path="../clustering/plsa.html">
            
                <a href="../clustering/plsa.html">
            
                    
                        <b>11.2.</b>
                    
                    Probabilistic Latent Semantic Analysis
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part XII - GeoSpatial Functions</li>
        
        
    
        <li class="chapter " data-level="12.1" data-path="../geospatial/latlon.html">
            
                <a href="../geospatial/latlon.html">
            
                    
                        <b>12.1.</b>
                    
                    Lat/Lon functions
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part XIII - Hivemall on SparkSQL</li>
        
        
    
        <li class="chapter " data-level="13.1" data-path="../spark/getting_started/README.md">
            
                <span>
            
                    
                        <b>13.1.</b>
                    
                    Getting Started
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="13.1.1" data-path="../spark/getting_started/installation.html">
            
                <a href="../spark/getting_started/installation.html">
            
                    
                        <b>13.1.1.</b>
                    
                    Installation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="13.2" data-path="../spark/binaryclass/">
            
                <a href="../spark/binaryclass/">
            
                    
                        <b>13.2.</b>
                    
                    Binary Classification
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="13.2.1" data-path="../spark/binaryclass/a9a_sql.html">
            
                <a href="../spark/binaryclass/a9a_sql.html">
            
                    
                        <b>13.2.1.</b>
                    
                    a9a Tutorial for SQL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="13.3" data-path="../spark/binaryclass/">
            
                <a href="../spark/binaryclass/">
            
                    
                        <b>13.3.</b>
                    
                    Regression
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="13.3.1" data-path="../spark/regression/e2006_sql.html">
            
                <a href="../spark/regression/e2006_sql.html">
            
                    
                        <b>13.3.1.</b>
                    
                    E2006-tfidf Regression Tutorial for SQL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Part XIV - Hivemall on Docker</li>
        
        
    
        <li class="chapter " data-level="14.1" data-path="../docker/getting_started.html">
            
                <a href="../docker/getting_started.html">
            
                    
                        <b>14.1.</b>
                    
                    Getting Started
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Part XIV - External References</li>
        
        
    
        <li class="chapter " data-level="15.1" >
            
                <a target="_blank" href="https://github.com/daijyc/hivemall/wiki/PigHome">
            
                    
                        <b>15.1.</b>
                    
                    Hivemall on Apache Pig
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >List of Functions</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
<p>This page describes a list of Hivemall functions. See also a <a href="generic_funcs.html">list of generic Hivemall functions</a> for more general-purpose functions such as array and map UDFs.</p>
<!-- toc --><div id="toc" class="toc">

<ul>
<li><a href="#regression">Regression</a></li>
<li><a href="#classification">Classification</a><ul>
<li><a href="#binary-classification">Binary classification</a></li>
<li><a href="#multiclass-classification">Multiclass classification</a></li>
</ul>
</li>
<li><a href="#matrix-factorization">Matrix factorization</a></li>
<li><a href="#factorization-machines">Factorization machines</a></li>
<li><a href="#recommendation">Recommendation</a></li>
<li><a href="#anomaly-detection">Anomaly detection</a></li>
<li><a href="#topic-modeling">Topic modeling</a></li>
<li><a href="#preprocessing">Preprocessing</a><ul>
<li><a href="#data-amplification">Data amplification</a></li>
<li><a href="#feature-binning">Feature binning</a></li>
<li><a href="#feature-format-conversion">Feature format conversion</a></li>
<li><a href="#feature-hashing">Feature hashing</a></li>
<li><a href="#feature-paring">Feature paring</a></li>
<li><a href="#ranking">Ranking</a></li>
<li><a href="#feature-scaling">Feature scaling</a></li>
<li><a href="#feature-selection">Feature selection</a></li>
<li><a href="#feature-transformation-and-vectorization">Feature transformation and vectorization</a></li>
</ul>
</li>
<li><a href="#geospatial-functions">Geospatial functions</a></li>
<li><a href="#distance-measures">Distance measures</a></li>
<li><a href="#locality-sensitive-hashing">Locality-sensitive hashing</a></li>
<li><a href="#similarity-measures">Similarity measures</a></li>
<li><a href="#evaluation">Evaluation</a></li>
<li><a href="#sketching">Sketching</a></li>
<li><a href="#ensemble-learning">Ensemble learning</a><ul>
<li><a href="#bagging">Bagging</a></li>
</ul>
</li>
<li><a href="#decision-trees-and-randomforest">Decision trees and RandomForest</a></li>
<li><a href="#xgboost">XGBoost</a></li>
<li><a href="#term-vector-model">Term Vector Model</a></li>
<li><a href="#nlp">NLP</a></li>
<li><a href="#others">Others</a></li>
</ul>

</div><!-- tocstop -->
<h1 id="regression">Regression</h1>
<ul>
<li><code>train_arow_regr(array&lt;int|bigint|string&gt; features, float target [, constant string options])</code> - a standard AROW (Adaptive Reguralization of Weight Vectors) regressor that uses <code>y - w^Tx</code> for the loss function.<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> 
  feature,
  argmin_kld(weight, covar) <span class="hljs-keyword">as</span> weight
<span class="hljs-keyword">FROM</span> (
  <span class="hljs-keyword">SELECT</span> 
     train_arow_regr(features,label) <span class="hljs-keyword">as</span> (feature,weight,covar)
  <span class="hljs-keyword">FROM</span> 
     training_data
 ) t 
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> feature
</code></pre>
Reference: <a href="https://papers.nips.cc/paper/3848-adaptive-regularization-of-weight-vectors.pdf" target="_blank">K. Crammer, A. Kulesza, and M. Dredze, &quot;Adaptive Regularization of Weight Vectors&quot;, In Proc. NIPS, 2009.</a><br></li>
<li><p><code>train_arowe2_regr(array&lt;int|bigint|string&gt; features, float target [, constant string options])</code> - a refined version of AROW (Adaptive Reguralization of Weight Vectors) regressor that usages adaptive epsilon-insensitive hinge loss <code>|w^t - y| - epsilon * stddev</code> for the loss function</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> 
  feature,
  argmin_kld(weight, covar) <span class="hljs-keyword">as</span> weight
<span class="hljs-keyword">FROM</span> (
  <span class="hljs-keyword">SELECT</span> 
     train_arowe2_regr(features,label) <span class="hljs-keyword">as</span> (feature,weight,covar)
  <span class="hljs-keyword">FROM</span> 
     training_data
 ) t 
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> feature
</code></pre>
</li>
<li><p><code>train_arowe_regr(array&lt;int|bigint|string&gt; features, float target [, constant string options])</code> - a refined version of AROW (Adaptive Reguralization of Weight Vectors) regressor that usages epsilon-insensitive hinge loss <code>|w^t - y| - epsilon</code> for the loss function</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> 
  feature,
  argmin_kld(weight, covar) <span class="hljs-keyword">as</span> weight
<span class="hljs-keyword">FROM</span> (
  <span class="hljs-keyword">SELECT</span> 
     train_arowe_regr(features,label) <span class="hljs-keyword">as</span> (feature,weight,covar)
  <span class="hljs-keyword">FROM</span> 
     training_data
 ) t 
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> feature
</code></pre>
</li>
<li><p><code>train_pa1_regr(array&lt;int|bigint|string&gt; features, float target [, constant string options])</code> - PA-1 regressor that returns a relation consists of <code>(int|bigint|string) feature, float weight</code>.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> 
 feature,
 <span class="hljs-keyword">avg</span>(weight) <span class="hljs-keyword">as</span> weight
<span class="hljs-keyword">FROM</span> 
 (<span class="hljs-keyword">SELECT</span> 
     train_pa1_regr(features,label) <span class="hljs-keyword">as</span> (feature,weight)
  <span class="hljs-keyword">FROM</span> 
     training_data
 ) t 
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> feature
</code></pre>
<p>Reference: <a href="http://jmlr.csail.mit.edu/papers/volume7/crammer06a/crammer06a.pdf" target="_blank">Koby Crammer et.al., Online Passive-Aggressive Algorithms. Journal of Machine Learning Research, 2006.</a><br></p>
</li>
<li><p><code>train_pa1a_regr(array&lt;int|bigint|string&gt; features, float target [, constant string options])</code> - Returns a relation consists of <code>(int|bigint|string) feature, float weight</code>.</p>
</li>
<li><p><code>train_pa2_regr(array&lt;int|bigint|string&gt; features, float target [, constant string options])</code> - Returns a relation consists of <code>(int|bigint|string) feature, float weight</code>.</p>
</li>
<li><p><code>train_pa2a_regr(array&lt;int|bigint|string&gt; features, float target [, constant string options])</code> - Returns a relation consists of <code>(int|bigint|string) feature, float weight</code>.</p>
</li>
<li><p><code>train_regressor(list&lt;string|int|bigint&gt; features, double label [, const string options])</code> - Returns a relation consists of &lt;string|int|bigint feature, float weight&gt;</p>
<pre><code>Build a prediction model by a generic regressor
</code></pre></li>
</ul>
<h1 id="classification">Classification</h1>
<h2 id="binary-classification">Binary classification</h2>
<ul>
<li><p><code>kpa_predict(@Nonnull double xh, @Nonnull double xk, @Nullable float w0, @Nonnull float w1, @Nonnull float w2, @Nullable float w3)</code> - Returns a prediction value in Double</p>
</li>
<li><p><code>train_arow(list&lt;string|int|bigint&gt; features, int label [, const string options])</code> - Returns a relation consists of &lt;string|int|bigint feature, float weight, float covar&gt;</p>
<pre><code>Build a prediction model by Adaptive Regularization of Weight Vectors (AROW) binary classifier
</code></pre><p>Reference: <a href="https://papers.nips.cc/paper/3848-adaptive-regularization-of-weight-vectors.pdf" target="_blank">K. Crammer, A. Kulesza, and M. Dredze, &quot;Adaptive Regularization of Weight Vectors&quot;, In Proc. NIPS, 2009.</a><br></p>
</li>
<li><p><code>train_arowh(list&lt;string|int|bigint&gt; features, int label [, const string options])</code> - Returns a relation consists of &lt;string|int|bigint feature, float weight, float covar&gt;</p>
<pre><code>Build a prediction model by AROW binary classifier using hinge loss
</code></pre></li>
<li><p><code>train_classifier(list&lt;string|int|bigint&gt; features, int label [, const string options])</code> - Returns a relation consists of &lt;string|int|bigint feature, float weight&gt;</p>
<pre><code>Build a prediction model by a generic classifier
</code></pre></li>
<li><p><code>train_cw(list&lt;string|int|bigint&gt; features, int label [, const string options])</code> - Returns a relation consists of &lt;string|int|bigint feature, float weight, float covar&gt;</p>
<pre><code>Build a prediction model by Confidence-Weighted (CW) binary classifier
</code></pre></li>
<li><p><code>train_kpa(array&lt;string|int|bigint&gt; features, int label [, const string options])</code> - returns a relation &lt;h int, hk int, float w0, float w1, float w2, float w3&gt;</p>
</li>
<li><p><code>train_pa(list&lt;string|int|bigint&gt; features, int label [, const string options])</code> - Returns a relation consists of &lt;string|int|bigint feature, float weight&gt;</p>
<pre><code>Build a prediction model by Passive-Aggressive (PA) binary classifier
</code></pre></li>
<li><p><code>train_pa1(list&lt;string|int|bigint&gt; features, int label [, const string options])</code> - Returns a relation consists of &lt;string|int|bigint feature, float weight&gt;</p>
<pre><code>Build a prediction model by Passive-Aggressive 1 (PA-1) binary classifier
</code></pre></li>
<li><p><code>train_pa2(list&lt;string|int|bigint&gt; features, int label [, const string options])</code> - Returns a relation consists of &lt;string|int|bigint feature, float weight&gt;</p>
<pre><code>Build a prediction model by Passive-Aggressive 2 (PA-2) binary classifier
</code></pre></li>
<li><p><code>train_perceptron(list&lt;string|int|bigint&gt; features, int label [, const string options])</code> - Returns a relation consists of &lt;string|int|bigint feature, float weight&gt;</p>
<pre><code>Build a prediction model by Perceptron binary classifier
</code></pre></li>
<li><p><code>train_scw(list&lt;string|int|bigint&gt; features, int label [, const string options])</code> - Returns a relation consists of &lt;string|int|bigint feature, float weight, float covar&gt;</p>
<pre><code>Build a prediction model by Soft Confidence-Weighted (SCW-1) binary classifier
</code></pre></li>
<li><p><code>train_scw2(list&lt;string|int|bigint&gt; features, int label [, const string options])</code> - Returns a relation consists of &lt;string|int|bigint feature, float weight, float covar&gt;</p>
<pre><code>Build a prediction model by Soft Confidence-Weighted 2 (SCW-2) binary classifier
</code></pre></li>
</ul>
<h2 id="multiclass-classification">Multiclass classification</h2>
<ul>
<li><p><code>train_multiclass_arow(list&lt;string|int|bigint&gt; features, {int|string} label [, const string options])</code> - Returns a relation consists of &lt;{int|string} label, {string|int|bigint} feature, float weight, float covar&gt;</p>
<pre><code>Build a prediction model by Adaptive Regularization of Weight Vectors (AROW) multiclass classifier
</code></pre></li>
<li><p><code>train_multiclass_arowh(list&lt;string|int|bigint&gt; features, int|string label [, const string options])</code> - Returns a relation consists of &lt;int|string label, string|int|bigint feature, float weight, float covar&gt;</p>
<pre><code>Build a prediction model by Adaptive Regularization of Weight Vectors (AROW) multiclass classifier using hinge loss
</code></pre></li>
<li><p><code>train_multiclass_cw(list&lt;string|int|bigint&gt; features, {int|string} label [, const string options])</code> - Returns a relation consists of &lt;{int|string} label, {string|int|bigint} feature, float weight, float covar&gt;</p>
<pre><code>Build a prediction model by Confidence-Weighted (CW) multiclass classifier
</code></pre></li>
<li><p><code>train_multiclass_pa(list&lt;string|int|bigint&gt; features, {int|string} label [, const string options])</code> - Returns a relation consists of &lt;{int|string} label, {string|int|bigint} feature, float weight&gt;</p>
<pre><code>Build a prediction model by Passive-Aggressive (PA) multiclass classifier
</code></pre></li>
<li><p><code>train_multiclass_pa1(list&lt;string|int|bigint&gt; features, {int|string} label [, const string options])</code> - Returns a relation consists of &lt;{int|string} label, {string|int|bigint} feature, float weight&gt;</p>
<pre><code>Build a prediction model by Passive-Aggressive 1 (PA-1) multiclass classifier
</code></pre></li>
<li><p><code>train_multiclass_pa2(list&lt;string|int|bigint&gt; features, {int|string} label [, const string options])</code> - Returns a relation consists of &lt;{int|string} label, {string|int|bigint} feature, float weight&gt;</p>
<pre><code>Build a prediction model by Passive-Aggressive 2 (PA-2) multiclass classifier
</code></pre></li>
<li><p><code>train_multiclass_perceptron(list&lt;string|int|bigint&gt; features, {int|string} label [, const string options])</code> - Returns a relation consists of &lt;{int|string} label, {string|int|bigint} feature, float weight&gt;</p>
<pre><code>Build a prediction model by Perceptron multiclass classifier
</code></pre></li>
<li><p><code>train_multiclass_scw(list&lt;string|int|bigint&gt; features, {int|string} label [, const string options])</code> - Returns a relation consists of &lt;{int|string} label, {string|int|bigint} feature, float weight, float covar&gt;</p>
<pre><code>Build a prediction model by Soft Confidence-Weighted (SCW-1) multiclass classifier
</code></pre></li>
<li><p><code>train_multiclass_scw2(list&lt;string|int|bigint&gt; features, {int|string} label [, const string options])</code> - Returns a relation consists of &lt;{int|string} label, {string|int|bigint} feature, float weight, float covar&gt;</p>
<pre><code>Build a prediction model by Soft Confidence-Weighted 2 (SCW-2) multiclass classifier
</code></pre></li>
</ul>
<h1 id="matrix-factorization">Matrix factorization</h1>
<ul>
<li><p><code>bprmf_predict(List&lt;Float&gt; Pu, List&lt;Float&gt; Qi[, double Bi])</code> - Returns the prediction value</p>
</li>
<li><p><code>mf_predict(array&lt;double&gt; Pu, array&lt;double&gt; Qi[, double Bu, double Bi[, double mu]])</code> - Returns the prediction value</p>
</li>
<li><p><code>train_bprmf(INT user, INT posItem, INT negItem [, String options])</code> - Returns a relation &lt;INT i, FLOAT Pi, FLOAT Qi [, FLOAT Bi]&gt;</p>
</li>
<li><p><code>train_mf_adagrad(INT user, INT item, FLOAT rating [, CONSTANT STRING options])</code> - Returns a relation consists of &lt;int idx, array&lt;float&gt; Pu, array&lt;float&gt; Qi [, float Bu, float Bi [, float mu]]&gt;</p>
</li>
<li><p><code>train_mf_sgd(INT user, INT item, FLOAT rating [, CONSTANT STRING options])</code> - Returns a relation consists of &lt;int idx, array&lt;float&gt; Pu, array&lt;float&gt; Qi [, float Bu, float Bi [, float mu]]&gt;</p>
</li>
</ul>
<h1 id="factorization-machines">Factorization machines</h1>
<ul>
<li><p><code>ffm_predict(float Wi, array&lt;float&gt; Vifj, array&lt;float&gt; Vjfi, float Xi, float Xj)</code> - Returns a prediction value in Double</p>
</li>
<li><p><code>fm_predict(Float Wj, array&lt;float&gt; Vjf, float Xj)</code> - Returns a prediction value in Double</p>
</li>
<li><p><code>train_ffm(array&lt;string&gt; x, double y [, const string options])</code> - Returns a prediction model</p>
</li>
<li><p><code>train_fm(array&lt;string&gt; x, double y [, const string options])</code> - Returns a prediction model</p>
</li>
</ul>
<h1 id="recommendation">Recommendation</h1>
<ul>
<li><code>train_slim( int i, map&lt;int, double&gt; r_i, map&lt;int, map&lt;int, double&gt;&gt; topKRatesOfI, int j, map&lt;int, double&gt; r_j [, constant string options])</code> - Returns row index, column index and non-zero weight value of prediction model</li>
</ul>
<h1 id="anomaly-detection">Anomaly detection</h1>
<ul>
<li><p><code>changefinder(double|array&lt;double&gt; x [, const string options])</code> - Returns outlier/change-point scores and decisions using ChangeFinder. It will return a tuple &lt;double outlier_score, double changepoint_score [, boolean is_anomaly [, boolean is_changepoint]]</p>
</li>
<li><p><code>sst(double|array&lt;double&gt; x [, const string options])</code> - Returns change-point scores and decisions using Singular Spectrum Transformation (SST). It will return a tuple &lt;double changepoint_score [, boolean is_changepoint]&gt;</p>
</li>
</ul>
<h1 id="topic-modeling">Topic modeling</h1>
<ul>
<li><p><code>lda_predict(string word, float value, int label, float lambda[, const string options])</code> - Returns a list which consists of &lt;int label, float prob&gt;</p>
</li>
<li><p><code>plsa_predict(string word, float value, int label, float prob[, const string options])</code> - Returns a list which consists of &lt;int label, float prob&gt;</p>
</li>
<li><p><code>train_lda(array&lt;string&gt; words[, const string options])</code> - Returns a relation consists of &lt;int topic, string word, float score&gt;</p>
</li>
<li><p><code>train_plsa(array&lt;string&gt; words[, const string options])</code> - Returns a relation consists of &lt;int topic, string word, float score&gt;</p>
</li>
</ul>
<h1 id="preprocessing">Preprocessing</h1>
<ul>
<li><p><code>add_bias(feature_vector in array&lt;string&gt;)</code> - Returns features with a bias in array&lt;string&gt;</p>
</li>
<li><p><code>add_feature_index(ARRAY[DOUBLE]: dense feature vector)</code> - Returns a feature vector with feature indices</p>
</li>
<li><p><code>extract_feature(feature_vector in array&lt;string&gt;)</code> - Returns features in array&lt;string&gt;</p>
</li>
<li><p><code>extract_weight(feature_vector in array&lt;string&gt;)</code> - Returns the weights of features in array&lt;string&gt;</p>
</li>
<li><p><code>feature(&lt;string|int|long|short|byte&gt; feature, &lt;number&gt; value)</code> - Returns a feature string</p>
</li>
<li><p><code>feature_index(feature_vector in array&lt;string&gt;)</code> - Returns feature indices in array&lt;index&gt;</p>
</li>
<li><p><code>sort_by_feature(map in map&lt;int,float&gt;)</code> - Returns a sorted map</p>
</li>
</ul>
<h2 id="data-amplification">Data amplification</h2>
<ul>
<li><p><code>amplify(const int xtimes, *)</code> - amplify the input records x-times</p>
</li>
<li><p><code>rand_amplify(const int xtimes [, const string options], *)</code> - amplify the input records x-times in map-side</p>
</li>
</ul>
<h2 id="feature-binning">Feature binning</h2>
<ul>
<li><p><code>build_bins(number weight, const int num_of_bins[, const boolean auto_shrink = false])</code> - Return quantiles representing bins: array&lt;double&gt;</p>
</li>
<li><p><code>feature_binning(array&lt;features::string&gt; features, map&lt;string, array&lt;number&gt;&gt; quantiles_map)</code> - returns a binned feature vector as an array&lt;features::string&gt; <em>FUNC</em>(number weight, array&lt;number&gt; quantiles) - returns bin ID as int</p>
<pre><code class="lang-sql">WITH extracted as (
  <span class="hljs-keyword">select</span> 
    extract_feature(feature) <span class="hljs-keyword">as</span> <span class="hljs-keyword">index</span>,
    extract_weight(feature) <span class="hljs-keyword">as</span> <span class="hljs-keyword">value</span>
  <span class="hljs-keyword">from</span>
    <span class="hljs-keyword">input</span> l
    LATERAL <span class="hljs-keyword">VIEW</span> explode(features) r <span class="hljs-keyword">as</span> feature
),
<span class="hljs-keyword">mapping</span> <span class="hljs-keyword">as</span> (
  <span class="hljs-keyword">select</span>
    <span class="hljs-keyword">index</span>, 
    build_bins(<span class="hljs-keyword">value</span>, <span class="hljs-number">5</span>, <span class="hljs-literal">true</span>) <span class="hljs-keyword">as</span> quantiles <span class="hljs-comment">-- 5 bins with auto bin shrinking</span>
  <span class="hljs-keyword">from</span>
    extracted
  <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span>
    <span class="hljs-keyword">index</span>
),
bins <span class="hljs-keyword">as</span> (
   <span class="hljs-keyword">select</span> 
    to_map(<span class="hljs-keyword">index</span>, quantiles) <span class="hljs-keyword">as</span> quantiles 
   <span class="hljs-keyword">from</span>
    <span class="hljs-keyword">mapping</span>
)
<span class="hljs-keyword">select</span>
  l.features <span class="hljs-keyword">as</span> original,
  feature_binning(l.features, r.quantiles) <span class="hljs-keyword">as</span> features
<span class="hljs-keyword">from</span>
  <span class="hljs-keyword">input</span> l
  <span class="hljs-keyword">cross</span> <span class="hljs-keyword">join</span> bins r

&gt; [<span class="hljs-string">&quot;name#Jacob&quot;</span>,<span class="hljs-string">&quot;gender#Male&quot;</span>,<span class="hljs-string">&quot;age:20.0&quot;</span>] [<span class="hljs-string">&quot;name#Jacob&quot;</span>,<span class="hljs-string">&quot;gender#Male&quot;</span>,<span class="hljs-string">&quot;age:2&quot;</span>]
&gt; [<span class="hljs-string">&quot;name#Isabella&quot;</span>,<span class="hljs-string">&quot;gender#Female&quot;</span>,<span class="hljs-string">&quot;age:20.0&quot;</span>]    [<span class="hljs-string">&quot;name#Isabella&quot;</span>,<span class="hljs-string">&quot;gender#Female&quot;</span>,<span class="hljs-string">&quot;age:2&quot;</span>]
</code></pre>
</li>
</ul>
<h2 id="feature-format-conversion">Feature format conversion</h2>
<ul>
<li><p><code>conv2dense(int feature, float weight, int nDims)</code> - Return a dense model in array&lt;float&gt;</p>
</li>
<li><p><code>quantify(boolean output, col1, col2, ...)</code> - Returns an identified features</p>
</li>
<li><p><code>to_dense_features(array&lt;string&gt; feature_vector, int dimensions)</code> - Returns a dense feature in array&lt;float&gt;</p>
</li>
<li><p><code>to_libsvm_format(array&lt;string&gt; feautres [, double/integer target, const string options])</code> - Returns a string representation of libsvm</p>
<pre><code class="lang-sql">Usage:
 <span class="hljs-keyword">select</span> to_libsvm_format(<span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:3.4&apos;</span>,<span class="hljs-string">&apos;orange:2.1&apos;</span>))
 &gt; <span class="hljs-number">6284535</span>:<span class="hljs-number">3.4</span> <span class="hljs-number">8104713</span>:<span class="hljs-number">2.1</span>
 <span class="hljs-keyword">select</span> to_libsvm_format(<span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:3.4&apos;</span>,<span class="hljs-string">&apos;orange:2.1&apos;</span>), <span class="hljs-string">&apos;-features 10&apos;</span>)
 &gt; <span class="hljs-number">3</span>:<span class="hljs-number">2.1</span> <span class="hljs-number">7</span>:<span class="hljs-number">3.4</span>
 <span class="hljs-keyword">select</span> to_libsvm_format(<span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;7:3.4&apos;</span>,<span class="hljs-string">&apos;3:2.1&apos;</span>), <span class="hljs-number">5.0</span>)
 &gt; <span class="hljs-number">5.0</span> <span class="hljs-number">3</span>:<span class="hljs-number">2.1</span> <span class="hljs-number">7</span>:<span class="hljs-number">3.4</span>
</code></pre>
</li>
<li><p><code>to_sparse_features(array&lt;float&gt; feature_vector)</code> - Returns a sparse feature in array&lt;string&gt;</p>
</li>
</ul>
<h2 id="feature-hashing">Feature hashing</h2>
<ul>
<li><p><code>array_hash_values(array&lt;string&gt; values, [string prefix [, int numFeatures], boolean useIndexAsPrefix])</code> returns hash values in array&lt;int&gt;</p>
</li>
<li><p><code>feature_hashing(array&lt;string&gt; features [, const string options])</code> - returns a hashed feature vector in array&lt;string&gt;</p>
<pre><code class="lang-sql"><span class="hljs-keyword">select</span> feature_hashing(<span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;aaa:1.0&apos;</span>,<span class="hljs-string">&apos;aaa&apos;</span>,<span class="hljs-string">&apos;bbb:2.0&apos;</span>), <span class="hljs-string">&apos;-libsvm&apos;</span>);
 [&quot;4063537:1.0&quot;,&quot;4063537:1&quot;,&quot;8459207:2.0&quot;]

<span class="hljs-keyword">select</span> feature_hashing(<span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;aaa:1.0&apos;</span>,<span class="hljs-string">&apos;aaa&apos;</span>,<span class="hljs-string">&apos;bbb:2.0&apos;</span>), <span class="hljs-string">&apos;-features 10&apos;</span>);
 [&quot;7:1.0&quot;,&quot;7&quot;,&quot;1:2.0&quot;]

<span class="hljs-keyword">select</span> feature_hashing(<span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;aaa:1.0&apos;</span>,<span class="hljs-string">&apos;aaa&apos;</span>,<span class="hljs-string">&apos;bbb:2.0&apos;</span>), <span class="hljs-string">&apos;-features 10 -libsvm&apos;</span>);
 [&quot;1:2.0&quot;,&quot;7:1.0&quot;,&quot;7:1&quot;]
</code></pre>
</li>
<li><p><code>mhash(string word)</code> returns a murmurhash3 INT value starting from 1</p>
</li>
<li><p><code>prefixed_hash_values(array&lt;string&gt; values, string prefix [, boolean useIndexAsPrefix])</code> returns array&lt;string&gt; that each element has the specified prefix</p>
</li>
<li><p><code>sha1(string word [, int numFeatures])</code> returns a SHA-1 value</p>
</li>
</ul>
<h2 id="feature-paring">Feature paring</h2>
<ul>
<li><p><code>feature_pairs(feature_vector in array&lt;string&gt;, [, const string options])</code> - Returns a relation &lt;string i, string j, double xi, double xj&gt;</p>
</li>
<li><p><code>polynomial_features(feature_vector in array&lt;string&gt;)</code> - Returns a feature vectorhaving polynomial feature space</p>
</li>
<li><p><code>powered_features(feature_vector in array&lt;string&gt;, int degree [, boolean truncate])</code> - Returns a feature vector having a powered feature space</p>
</li>
</ul>
<h2 id="ranking">Ranking</h2>
<ul>
<li><p><code>bpr_sampling(int userId, List&lt;int&gt; posItems [, const string options])</code>- Returns a relation consists of &lt;int userId, int itemId&gt;</p>
</li>
<li><p><code>item_pairs_sampling(array&lt;int|long&gt; pos_items, const int max_item_id [, const string options])</code>- Returns a relation consists of &lt;int pos_item_id, int neg_item_id&gt;</p>
</li>
<li><p><code>populate_not_in(list items, const int max_item_id [, const string options])</code>- Returns a relation consists of &lt;int item&gt; that item does not exist in the given items</p>
</li>
</ul>
<h2 id="feature-scaling">Feature scaling</h2>
<ul>
<li><p><code>l1_normalize(ftvec string)</code> - Returned a L1 normalized value</p>
</li>
<li><p><code>l2_normalize(ftvec string)</code> - Returned a L2 normalized value</p>
</li>
<li><p><code>rescale(value, min, max)</code> - Returns rescaled value by min-max normalization</p>
</li>
<li><p><code>zscore(value, mean, stddev)</code> - Returns a standard score (zscore)</p>
</li>
</ul>
<h2 id="feature-selection">Feature selection</h2>
<ul>
<li><p><code>chi2(array&lt;array&lt;number&gt;&gt; observed, array&lt;array&lt;number&gt;&gt; expected)</code> - Returns chi2_val and p_val of each columns as &lt;array&lt;double&gt;, array&lt;double&gt;&gt;</p>
</li>
<li><p><code>snr(array&lt;number&gt; features, array&lt;int&gt; one-hot class label)</code> - Returns Signal Noise Ratio for each feature as array&lt;double&gt;</p>
</li>
</ul>
<h2 id="feature-transformation-and-vectorization">Feature transformation and vectorization</h2>
<ul>
<li><p><code>add_field_indices(array&lt;string&gt; features)</code> - Returns arrays of string that field indices (&lt;field&gt;:&lt;feature&gt;)* are augmented</p>
</li>
<li><p><code>binarize_label(int/long positive, int/long negative, ...)</code> - Returns positive/negative records that are represented as (..., int label) where label is 0 or 1</p>
</li>
<li><p><code>categorical_features(array&lt;string&gt; featureNames, feature1, feature2, .. [, const string options])</code> - Returns a feature vector array&lt;string&gt;</p>
</li>
<li><p><code>ffm_features(const array&lt;string&gt; featureNames, feature1, feature2, .. [, const string options])</code> - Takes categorical variables and returns a feature vector array&lt;string&gt; in a libffm format &lt;field&gt;:&lt;index&gt;:&lt;value&gt;</p>
</li>
<li><p><code>indexed_features(double v1, double v2, ...)</code> - Returns a list of features as array&lt;string&gt;: [1:v1, 2:v2, ..]</p>
</li>
<li><p><code>onehot_encoding(PRIMITIVE feature, ...)</code> - Compute onehot encoded label for each feature</p>
<pre><code class="lang-sql">WITH mapping as (
  <span class="hljs-keyword">select</span> 
    m.f1, m.f2 
  <span class="hljs-keyword">from</span> (
    <span class="hljs-keyword">select</span> onehot_encoding(species, <span class="hljs-keyword">category</span>) m
    <span class="hljs-keyword">from</span> <span class="hljs-keyword">test</span>
  ) tmp
)
<span class="hljs-keyword">select</span>
  <span class="hljs-built_in">array</span>(m.f1[t.species],m.f2[t.<span class="hljs-keyword">category</span>],feature(<span class="hljs-string">&apos;count&apos;</span>,<span class="hljs-keyword">count</span>)) <span class="hljs-keyword">as</span> sparse_features
<span class="hljs-keyword">from</span>
  <span class="hljs-keyword">test</span> t
  <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> <span class="hljs-keyword">mapping</span> m;

[&quot;2&quot;,&quot;8&quot;,&quot;count:9&quot;]
[&quot;5&quot;,&quot;8&quot;,&quot;count:10&quot;]
[&quot;1&quot;,&quot;6&quot;,&quot;count:101&quot;]
</code></pre>
</li>
<li><p><code>quantified_features(boolean output, col1, col2, ...)</code> - Returns an identified features in a dense array&lt;double&gt;</p>
</li>
<li><p><code>quantitative_features(array&lt;string&gt; featureNames, feature1, feature2, .. [, const string options])</code> - Returns a feature vector array&lt;string&gt;</p>
</li>
<li><p><code>vectorize_features(array&lt;string&gt; featureNames, feature1, feature2, .. [, const string options])</code> - Returns a feature vector array&lt;string&gt;</p>
</li>
</ul>
<h1 id="geospatial-functions">Geospatial functions</h1>
<ul>
<li><p><code>haversine_distance(double lat1, double lon1, double lat2, double lon2, [const boolean mile=false])</code>::double - return distance between two locations in km [or miles] using <code>haversine</code> formula</p>
<pre><code class="lang-sql">Usage: <span class="hljs-keyword">select</span> latlon_distance(lat1, lon1, lat2, lon2) <span class="hljs-keyword">from</span> ...
</code></pre>
</li>
<li><p><code>lat2tiley(double lat, int zoom)</code>::int - Returns the tile number of the given latitude and zoom level</p>
</li>
<li><p><code>lon2tilex(double lon, int zoom)</code>::int - Returns the tile number of the given longitude and zoom level</p>
</li>
<li><p><code>map_url(double lat, double lon, int zoom [, const string option])</code> - Returns a URL string</p>
<pre><code>OpenStreetMap: http://tile.openstreetmap.org/${zoom}/${xtile}/${ytile}.png
Google Maps: https://www.google.com/maps/@${lat},${lon},${zoom}z
</code></pre></li>
<li><p><code>tile(double lat, double lon, int zoom)</code>::bigint - Returns a tile number 2^2n where n is zoom level. <em>FUNC</em>(lat,lon,zoom) = xtile(lon,zoom) + ytile(lat,zoom) * 2^zoom</p>
<pre><code>refer https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames for detail
</code></pre></li>
<li><p><code>tilex2lon(int x, int zoom)</code>::double - Returns longitude of the given tile x and zoom level</p>
</li>
<li><p><code>tiley2lat(int y, int zoom)</code>::double - Returns latitude of the given tile y and zoom level</p>
</li>
</ul>
<h1 id="distance-measures">Distance measures</h1>
<ul>
<li><p><code>angular_distance(ftvec1, ftvec2)</code> - Returns an angular distance of the given two vectors</p>
<pre><code class="lang-sql">WITH docs as (
  <span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:2.0&apos;</span>, <span class="hljs-string">&apos;banana:1.0&apos;</span>, <span class="hljs-string">&apos;kuwi:0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">2</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">3</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:2.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
) 
<span class="hljs-keyword">select</span>
  l.docid <span class="hljs-keyword">as</span> doc1,
  r.docid <span class="hljs-keyword">as</span> doc2,
  angular_distance(l.features, r.features) <span class="hljs-keyword">as</span> distance,
  distance2similarity(angular_distance(l.features, r.features)) <span class="hljs-keyword">as</span> similarity
<span class="hljs-keyword">from</span> 
  docs l
  <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> docs r
<span class="hljs-keyword">where</span>
  l.docid != r.docid
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 
  doc1 <span class="hljs-keyword">asc</span>,
  distance <span class="hljs-keyword">asc</span>;

doc1    doc2    distance        similarity
1       3       0.31678355      0.75942624
1       2       0.33333337      0.75
2       3       0.09841931      0.91039914
2       1       0.33333337      0.75
3       2       0.09841931      0.91039914
3       1       0.31678355      0.75942624
</code></pre>
</li>
<li><p><code>cosine_distance(ftvec1, ftvec2)</code> - Returns a cosine distance of the given two vectors</p>
<pre><code class="lang-sql">WITH docs as (
  <span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:2.0&apos;</span>, <span class="hljs-string">&apos;banana:1.0&apos;</span>, <span class="hljs-string">&apos;kuwi:0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">2</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">3</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:2.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
) 
<span class="hljs-keyword">select</span>
  l.docid <span class="hljs-keyword">as</span> doc1,
  r.docid <span class="hljs-keyword">as</span> doc2,
  cosine_distance(l.features, r.features) <span class="hljs-keyword">as</span> distance,
  distance2similarity(cosine_distance(l.features, r.features)) <span class="hljs-keyword">as</span> similarity
<span class="hljs-keyword">from</span> 
  docs l
  <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> docs r
<span class="hljs-keyword">where</span>
  l.docid != r.docid
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 
  doc1 <span class="hljs-keyword">asc</span>,
  distance <span class="hljs-keyword">asc</span>;

doc1    doc2    distance        similarity
1       3       0.45566893      0.6869694
1       2       0.5     0.6666667
2       3       0.04742068      0.95472616
2       1       0.5     0.6666667
3       2       0.04742068      0.95472616
3       1       0.45566893      0.6869694
</code></pre>
</li>
<li><p><code>euclid_distance(ftvec1, ftvec2)</code> - Returns the square root of the sum of the squared differences: sqrt(sum((x - y)^2))</p>
<pre><code class="lang-sql">WITH docs as (
  <span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:2.0&apos;</span>, <span class="hljs-string">&apos;banana:1.0&apos;</span>, <span class="hljs-string">&apos;kuwi:0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">2</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">3</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:2.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
) 
<span class="hljs-keyword">select</span>
  l.docid <span class="hljs-keyword">as</span> doc1,
  r.docid <span class="hljs-keyword">as</span> doc2,
  euclid_distance(l.features, r.features) <span class="hljs-keyword">as</span> distance,
  distance2similarity(euclid_distance(l.features, r.features)) <span class="hljs-keyword">as</span> similarity
<span class="hljs-keyword">from</span> 
  docs l
  <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> docs r
<span class="hljs-keyword">where</span>
  l.docid != r.docid
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 
  doc1 <span class="hljs-keyword">asc</span>,
  distance <span class="hljs-keyword">asc</span>;

doc1    doc2    distance        similarity
1       2       2.4494898       0.28989795
1       3       2.6457512       0.2742919
2       3       1.0     0.5
2       1       2.4494898       0.28989795
3       2       1.0     0.5
3       1       2.6457512       0.2742919
</code></pre>
</li>
<li><p><code>hamming_distance(integer A, integer B)</code> - Returns Hamming distance between A and B</p>
<pre><code class="lang-sql"><span class="hljs-keyword">select</span> 
  hamming_distance(<span class="hljs-number">0</span>,<span class="hljs-number">3</span>) <span class="hljs-keyword">as</span> c1, 
  hamming_distance(<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>) <span class="hljs-keyword">as</span> c2 <span class="hljs-comment">-- 0=0x00, 3=0x11</span>
;

c1      c2
2       2
</code></pre>
</li>
<li><p><code>jaccard_distance(integer A, integer B [,int k=128])</code> - Returns Jaccard distance between A and B</p>
<pre><code class="lang-sql"><span class="hljs-keyword">select</span> 
  jaccard_distance(<span class="hljs-number">0</span>,<span class="hljs-number">3</span>) <span class="hljs-keyword">as</span> c1, 
  jaccard_distance(<span class="hljs-string">&quot;0&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>) <span class="hljs-keyword">as</span> c2, <span class="hljs-comment">-- 0=0x00, 0=0x11</span>
  jaccard_distance(<span class="hljs-number">0</span>,<span class="hljs-number">4</span>) <span class="hljs-keyword">as</span> c3
;

c1      c2      c3
0.03125 0.03125 0.015625
</code></pre>
</li>
<li><p><code>kld(double mu1, double sigma1, double mu2, double sigma2)</code> - Returns KL divergence between two distributions</p>
</li>
<li><p><code>manhattan_distance(list x, list y)</code> - Returns sum(|x - y|)</p>
<pre><code class="lang-sql">WITH docs as (
  <span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:2.0&apos;</span>, <span class="hljs-string">&apos;banana:1.0&apos;</span>, <span class="hljs-string">&apos;kuwi:0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">2</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">3</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:2.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
) 
<span class="hljs-keyword">select</span>
  l.docid <span class="hljs-keyword">as</span> doc1,
  r.docid <span class="hljs-keyword">as</span> doc2,
  manhattan_distance(l.features, r.features) <span class="hljs-keyword">as</span> distance,
  distance2similarity(angular_distance(l.features, r.features)) <span class="hljs-keyword">as</span> similarity
<span class="hljs-keyword">from</span> 
  docs l
  <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> docs r
<span class="hljs-keyword">where</span>
  l.docid != r.docid
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 
  doc1 <span class="hljs-keyword">asc</span>,
  distance <span class="hljs-keyword">asc</span>;

doc1    doc2    distance        similarity
1       2       4.0     0.75
1       3       5.0     0.75942624
2       3       1.0     0.91039914
2       1       4.0     0.75
3       2       1.0     0.91039914
3       1       5.0     0.75942624
</code></pre>
</li>
<li><p><code>minkowski_distance(list x, list y, double p)</code> - Returns sum(|x - y|^p)^(1/p)</p>
<pre><code class="lang-sql">WITH docs as (
  <span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:2.0&apos;</span>, <span class="hljs-string">&apos;banana:1.0&apos;</span>, <span class="hljs-string">&apos;kuwi:0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">2</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">3</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:2.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
) 
<span class="hljs-keyword">select</span>
  l.docid <span class="hljs-keyword">as</span> doc1,
  r.docid <span class="hljs-keyword">as</span> doc2,
  minkowski_distance(l.features, r.features, <span class="hljs-number">1</span>) <span class="hljs-keyword">as</span> distance1, <span class="hljs-comment">-- p=1 (manhattan_distance)</span>
  minkowski_distance(l.features, r.features, <span class="hljs-number">2</span>) <span class="hljs-keyword">as</span> distance2, <span class="hljs-comment">-- p=2 (euclid_distance)</span>
  minkowski_distance(l.features, r.features, <span class="hljs-number">3</span>) <span class="hljs-keyword">as</span> distance3, <span class="hljs-comment">-- p=3</span>
  manhattan_distance(l.features, r.features) <span class="hljs-keyword">as</span> manhattan_distance,
  euclid_distance(l.features, r.features) <span class="hljs-keyword">as</span> euclid_distance
<span class="hljs-keyword">from</span> 
  docs l
  <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> docs r
<span class="hljs-keyword">where</span>
  l.docid != r.docid
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 
  doc1 <span class="hljs-keyword">asc</span>,
  distance1 <span class="hljs-keyword">asc</span>;

doc1    doc2    distance1       distance2       distance3       manhattan_distance      euclid_distance
1       2       4.0     2.4494898       2.1544347       4.0     2.4494898
1       3       5.0     2.6457512       2.2239802       5.0     2.6457512
2       3       1.0     1.0     1.0     1.0     1.0
2       1       4.0     2.4494898       2.1544347       4.0     2.4494898
3       2       1.0     1.0     1.0     1.0     1.0
3       1       5.0     2.6457512       2.2239802       5.0     2.6457512
</code></pre>
</li>
<li><p><code>popcnt(a [, b])</code> - Returns a popcount value</p>
<pre><code class="lang-sql"><span class="hljs-keyword">select</span> 
  popcnt(<span class="hljs-number">3</span>),
  popcnt(<span class="hljs-string">&quot;3&quot;</span>),  <span class="hljs-comment">-- 3=0x11</span>
  popcnt(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>));

2       2       3
</code></pre>
</li>
</ul>
<h1 id="locality-sensitive-hashing">Locality-sensitive hashing</h1>
<ul>
<li><p><code>bbit_minhash(array&lt;&gt; features [, int numHashes])</code> - Returns a b-bits minhash value</p>
</li>
<li><p><code>minhash(ANY item, array&lt;int|bigint|string&gt; features [, constant string options])</code> - Returns n different k-depth signatures (i.e., clusterid) for each item &lt;clusterid, item&gt;</p>
</li>
<li><p><code>minhashes(array&lt;&gt; features [, int numHashes, int keyGroup [, boolean noWeight]])</code> - Returns minhash values</p>
</li>
</ul>
<h1 id="similarity-measures">Similarity measures</h1>
<ul>
<li><p><code>angular_similarity(ftvec1, ftvec2)</code> - Returns an angular similarity of the given two vectors</p>
<pre><code class="lang-sql">WITH docs as (
  <span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:2.0&apos;</span>, <span class="hljs-string">&apos;banana:1.0&apos;</span>, <span class="hljs-string">&apos;kuwi:0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">2</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">3</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:2.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
) 
<span class="hljs-keyword">select</span>
  l.docid <span class="hljs-keyword">as</span> doc1,
  r.docid <span class="hljs-keyword">as</span> doc2,
  angular_similarity(l.features, r.features) <span class="hljs-keyword">as</span> similarity
<span class="hljs-keyword">from</span> 
  docs l
  <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> docs r
<span class="hljs-keyword">where</span>
  l.docid != r.docid
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 
  doc1 <span class="hljs-keyword">asc</span>,
  similarity <span class="hljs-keyword">desc</span>;

doc1    doc2    similarity
1       3       0.68321645
1       2       0.6666666
2       3       0.9015807
2       1       0.6666666
3       2       0.9015807
3       1       0.68321645
</code></pre>
</li>
<li><p><code>cosine_similarity(ftvec1, ftvec2)</code> - Returns a cosine similarity of the given two vectors</p>
<pre><code class="lang-sql">WITH docs as (
  <span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:2.0&apos;</span>, <span class="hljs-string">&apos;banana:1.0&apos;</span>, <span class="hljs-string">&apos;kuwi:0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">2</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">3</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:2.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
) 
<span class="hljs-keyword">select</span>
  l.docid <span class="hljs-keyword">as</span> doc1,
  r.docid <span class="hljs-keyword">as</span> doc2,
  cosine_similarity(l.features, r.features) <span class="hljs-keyword">as</span> similarity
<span class="hljs-keyword">from</span> 
  docs l
  <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> docs r
<span class="hljs-keyword">where</span>
  l.docid != r.docid
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 
  doc1 <span class="hljs-keyword">asc</span>,
  similarity <span class="hljs-keyword">desc</span>;

doc1    doc2    similarity
1       3       0.5443311
1       2       0.5
2       3       0.9525793
2       1       0.5
3       2       0.9525793
3       1       0.5443311
</code></pre>
</li>
<li><p><code>dimsum_mapper(array&lt;string&gt; row, map&lt;int col_id, double norm&gt; colNorms [, const string options])</code> - Returns column-wise partial similarities</p>
</li>
<li><p><code>distance2similarity(float d)</code> - Returns 1.0 / (1.0 + d)</p>
</li>
<li><p><code>euclid_similarity(ftvec1, ftvec2)</code> - Returns a euclid distance based similarity, which is <code>1.0 / (1.0 + distance)</code>, of the given two vectors</p>
<pre><code class="lang-sql">WITH docs as (
  <span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:2.0&apos;</span>, <span class="hljs-string">&apos;banana:1.0&apos;</span>, <span class="hljs-string">&apos;kuwi:0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">2</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">3</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:2.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
) 
<span class="hljs-keyword">select</span>
  l.docid <span class="hljs-keyword">as</span> doc1,
  r.docid <span class="hljs-keyword">as</span> doc2,
  euclid_similarity(l.features, r.features) <span class="hljs-keyword">as</span> similarity
<span class="hljs-keyword">from</span> 
  docs l
  <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> docs r
<span class="hljs-keyword">where</span>
  l.docid != r.docid
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 
  doc1 <span class="hljs-keyword">asc</span>,
  similarity <span class="hljs-keyword">desc</span>;

doc1    doc2    similarity
1       2       0.28989795
1       3       0.2742919
2       3       0.5
2       1       0.28989795
3       2       0.5
3       1       0.2742919
</code></pre>
</li>
<li><p><code>jaccard_similarity(A, B [,int k])</code> - Returns Jaccard similarity coefficient of A and B</p>
<pre><code class="lang-sql">WITH docs as (
  <span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:2.0&apos;</span>, <span class="hljs-string">&apos;banana:1.0&apos;</span>, <span class="hljs-string">&apos;kuwi:0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">2</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:1.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
  <span class="hljs-keyword">union</span> all
  <span class="hljs-keyword">select</span> <span class="hljs-number">3</span> <span class="hljs-keyword">as</span> docid, <span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;apple:2.0&apos;</span>, <span class="hljs-string">&apos;orange:0&apos;</span>, <span class="hljs-string">&apos;banana:2.0&apos;</span>, <span class="hljs-string">&apos;kuwi:1.0&apos;</span>) <span class="hljs-keyword">as</span> features
) 
<span class="hljs-keyword">select</span>
  l.docid <span class="hljs-keyword">as</span> doc1,
  r.docid <span class="hljs-keyword">as</span> doc2,
  jaccard_similarity(l.features, r.features) <span class="hljs-keyword">as</span> similarity
<span class="hljs-keyword">from</span> 
  docs l
  <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> docs r
<span class="hljs-keyword">where</span>
  l.docid != r.docid
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> 
  doc1 <span class="hljs-keyword">asc</span>,
  similarity <span class="hljs-keyword">desc</span>;

doc1    doc2    similarity
1       2       0.14285715
1       3       0.0
2       3       0.6
2       1       0.14285715
3       2       0.6
3       1       0.0
</code></pre>
</li>
</ul>
<h1 id="evaluation">Evaluation</h1>
<ul>
<li><p><code>auc(array rankItems | double score, array correctItems | int label [, const int recommendSize = rankItems.size ])</code> - Returns AUC</p>
</li>
<li><p><code>average_precision(array rankItems, array correctItems [, const int recommendSize = rankItems.size])</code> - Returns MAP</p>
</li>
<li><p><code>f1score(array[int], array[int])</code> - Return a F1 score</p>
</li>
<li><p><code>fmeasure(array|int|boolean actual, array|int| boolean predicted [, const string options])</code> - Return a F-measure (f1score is the special with beta=1.0)</p>
</li>
<li><p><code>hitrate(array rankItems, array correctItems [, const int recommendSize = rankItems.size])</code> - Returns HitRate</p>
</li>
<li><p><code>logloss(double predicted, double actual)</code> - Return a Logrithmic Loss</p>
</li>
<li><p><code>mae(double predicted, double actual)</code> - Return a Mean Absolute Error</p>
</li>
<li><p><code>mrr(array rankItems, array correctItems [, const int recommendSize = rankItems.size])</code> - Returns MRR</p>
</li>
<li><p><code>mse(double predicted, double actual)</code> - Return a Mean Squared Error</p>
</li>
<li><p><code>ndcg(array rankItems, array correctItems [, const int recommendSize = rankItems.size])</code> - Returns nDCG</p>
</li>
<li><p><code>precision_at(array rankItems, array correctItems [, const int recommendSize = rankItems.size])</code> - Returns Precision</p>
</li>
<li><p><code>r2(double predicted, double actual)</code> - Return R Squared (coefficient of determination)</p>
</li>
<li><p><code>recall_at(array rankItems, array correctItems [, const int recommendSize = rankItems.size])</code> - Returns Recall</p>
</li>
<li><p><code>rmse(double predicted, double actual)</code> - Return a Root Mean Squared Error</p>
</li>
</ul>
<h1 id="sketching">Sketching</h1>
<ul>
<li><p><code>approx_count_distinct(expr x [, const string options])</code> - Returns an approximation of count(DISTINCT x) using HyperLogLogPlus algorithm</p>
</li>
<li><p><code>bloom(string key)</code> - Constructs a BloomFilter by aggregating a set of keys</p>
<pre><code class="lang-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> satisfied_movies <span class="hljs-keyword">AS</span> 
  <span class="hljs-keyword">SELECT</span> bloom(movieid) <span class="hljs-keyword">as</span> movies
  <span class="hljs-keyword">FROM</span> (
    <span class="hljs-keyword">SELECT</span> movieid
    <span class="hljs-keyword">FROM</span> ratings
    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> movieid
    <span class="hljs-keyword">HAVING</span> <span class="hljs-keyword">avg</span>(rating) &gt;= <span class="hljs-number">4.0</span>
  ) t;
</code></pre>
</li>
<li><p><code>bloom_and(string bloom1, string bloom2)</code> - Returns the logical AND of two bloom filters</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> bloom_and(bf1, bf2) <span class="hljs-keyword">FROM</span> xxx;
</code></pre>
</li>
<li><p><code>bloom_contains(string bloom, string key)</code> or <em>FUNC</em>(string bloom, array&lt;string&gt; keys) - Returns true if the bloom filter contains all the given key(s). Returns false if key is null.</p>
<pre><code class="lang-sql">WITH satisfied_movies as (
  <span class="hljs-keyword">SELECT</span> bloom(movieid) <span class="hljs-keyword">as</span> movies
  <span class="hljs-keyword">FROM</span> (
    <span class="hljs-keyword">SELECT</span> movieid
    <span class="hljs-keyword">FROM</span> ratings
    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> movieid
    <span class="hljs-keyword">HAVING</span> <span class="hljs-keyword">avg</span>(rating) &gt;= <span class="hljs-number">4.0</span>
  ) t
)
<span class="hljs-keyword">SELECT</span>
  l.rating,
  <span class="hljs-keyword">count</span>(<span class="hljs-keyword">distinct</span> l.userid) <span class="hljs-keyword">as</span> cnt
<span class="hljs-keyword">FROM</span>
  ratings l 
  <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> satisfied_movies r
<span class="hljs-keyword">WHERE</span>
  bloom_contains(r.movies, l.movieid) <span class="hljs-comment">-- includes false positive</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> 
  l.rating;

l.rating        cnt
1       1296
2       2770
3       5008
4       5824
5       5925
</code></pre>
</li>
<li><p><code>bloom_contains_any(string bloom, string key)</code> or <em>FUNC</em>(string bloom, array&lt;string&gt; keys)- Returns true if the bloom filter contains any of the given key</p>
<pre><code class="lang-sql">WITH data1 as (
  <span class="hljs-keyword">SELECT</span> explode(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>)) <span class="hljs-keyword">as</span> <span class="hljs-keyword">id</span>
),
data2 <span class="hljs-keyword">as</span> (
  <span class="hljs-keyword">SELECT</span> explode(<span class="hljs-built_in">array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">8</span>)) <span class="hljs-keyword">as</span> <span class="hljs-keyword">id</span>
),
bloom <span class="hljs-keyword">as</span> (
  <span class="hljs-keyword">SELECT</span> bloom(<span class="hljs-keyword">id</span>) <span class="hljs-keyword">as</span> bf
  <span class="hljs-keyword">FROM</span> data1
)
<span class="hljs-keyword">SELECT</span> 
  l.* 
<span class="hljs-keyword">FROM</span> 
  data2 l
  <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> bloom r
<span class="hljs-keyword">WHERE</span>
  bloom_contains_any(r.bf, <span class="hljs-built_in">array</span>(l.<span class="hljs-keyword">id</span>))
</code></pre>
</li>
<li><p><code>bloom_not(string bloom)</code> - Returns the logical NOT of a bloom filters</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> bloom_not(bf) <span class="hljs-keyword">FROM</span> xxx;
</code></pre>
</li>
<li><p><code>bloom_or(string bloom1, string bloom2)</code> - Returns the logical OR of two bloom filters</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> bloom_or(bf1, bf2) <span class="hljs-keyword">FROM</span> xxx;
</code></pre>
</li>
</ul>
<h1 id="ensemble-learning">Ensemble learning</h1>
<ul>
<li><p><code>argmin_kld(float mean, float covar)</code> - Returns mean or covar that minimize a KL-distance among distributions</p>
<pre><code>The returned value is (1.0 / (sum(1.0 / covar))) * (sum(mean / covar)
</code></pre></li>
<li><p><code>max_label(double value, string label)</code> - Returns a label that has the maximum value</p>
</li>
<li><p><code>maxrow(ANY compare, ...)</code> - Returns a row that has maximum value in the 1st argument</p>
</li>
</ul>
<h2 id="bagging">Bagging</h2>
<ul>
<li><p><code>voted_avg(double value)</code> - Returns an averaged value by bagging for classification</p>
</li>
<li><p><code>weight_voted_avg(expr)</code> - Returns an averaged value by considering sum of positive/negative weights</p>
</li>
</ul>
<h1 id="decision-trees-and-randomforest">Decision trees and RandomForest</h1>
<ul>
<li><p><code>train_gradient_tree_boosting_classifier(array&lt;double|string&gt; features, int label [, string options])</code> - Returns a relation consists of &lt;int iteration, int model_type, array&lt;string&gt; pred_models, double intercept, double shrinkage, array&lt;double&gt; var_importance, float oob_error_rate&gt;</p>
</li>
<li><p><code>train_randomforest_classifier(array&lt;double|string&gt; features, int label [, const string options, const array&lt;double&gt; classWeights])</code>- Returns a relation consists of &lt;string model_id, double model_weight, string model, array&lt;double&gt; var_importance, int oob_errors, int oob_tests&gt;</p>
</li>
<li><p><code>train_randomforest_regressor(array&lt;double|string&gt; features, double target [, string options])</code> - Returns a relation consists of &lt;int model_id, int model_type, string model, array&lt;double&gt; var_importance, double oob_errors, int oob_tests&gt;</p>
</li>
<li><p><code>decision_path(string modelId, string model, array&lt;double|string&gt; features [, const string options] [, optional array&lt;string&gt; featureNames=null, optional array&lt;string&gt; classNames=null])</code> - Returns a decision path for each prediction in array&lt;string&gt;</p>
<pre><code class="lang-sql">SELECT
  t.passengerid,
  decision_path(m.model_id, m.model, t.features, &apos;-classification&apos;)
FROM
  model_rf m
  LEFT OUTER JOIN
  test_rf t;
 | 892 | [&quot;2 [0.0] = 0.0&quot;,&quot;0 [3.0] = 3.0&quot;,&quot;1 [696.0] != 107.0&quot;,&quot;7 [7.8292] &lt;= 7.9104&quot;,&quot;1 [696.0] != 828.0&quot;,&quot;1 [696.0] != 391.0&quot;,&quot;0 [0.961038961038961, 0.03896103896103896]&quot;] |

-- Show 100 frequent branches
WITH tmp as (
  SELECT
    decision_path(m.model_id, m.model, t.features, &apos;-classification -no_verbose -no_leaf&apos;, array(&apos;pclass&apos;,&apos;name&apos;,&apos;sex&apos;,&apos;age&apos;,&apos;sibsp&apos;,&apos;parch&apos;,&apos;ticket&apos;,&apos;fare&apos;,&apos;cabin&apos;,&apos;embarked&apos;), array(&apos;no&apos;,&apos;yes&apos;)) as path
  FROM
    model_rf m
    LEFT OUTER JOIN -- CROSS JOIN
    test_rf t
)
select
  r.branch,
  count(1) as cnt
from
  tmp l
  LATERAL VIEW explode(l.path) r as branch
group by
  r.branch
order by
  cnt desc
limit 100;
</code></pre>
</li>
<li><p><code>guess_attribute_types(ANY, ...)</code> - Returns attribute types</p>
<pre><code class="lang-sql"><span class="hljs-keyword">select</span> guess_attribute_types(*) <span class="hljs-keyword">from</span> train <span class="hljs-keyword">limit</span> <span class="hljs-number">1</span>;
 Q,Q,C,C,C,C,Q,C,C,C,Q,C,Q,Q,Q,Q,C,Q
</code></pre>
</li>
<li><p><code>rf_ensemble(int yhat [, array&lt;double&gt; proba [, double model_weight=1.0]])</code> - Returns ensembled prediction results in &lt;int label, double probability, array&lt;double&gt; probabilities&gt;</p>
</li>
<li><p><code>tree_export(string model, const string options, optional array&lt;string&gt; featureNames=null, optional array&lt;string&gt; classNames=null)</code> - exports a Decision Tree model as javascript/dot]</p>
</li>
<li><p><code>tree_predict(string modelId, string model, array&lt;double|string&gt; features [, const string options | const boolean classification=false])</code> - Returns a prediction result of a random forest in &lt;int value, array&lt;double&gt; a posteriori&gt; for classification and &lt;double&gt; for regression</p>
</li>
</ul>
<h1 id="xgboost">XGBoost</h1>
<ul>
<li><p><code>train_xgboost(array&lt;string|double&gt; features, &lt;int|double&gt; target, const string options)</code> - Returns a relation consists of &lt;string model_id, array&lt;string&gt; pred_model&gt;</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> 
  train_xgboost(features, label, <span class="hljs-string">&apos;-objective binary:logistic -iters 10&apos;</span>) 
    <span class="hljs-keyword">as</span> (model_id, <span class="hljs-keyword">model</span>)
<span class="hljs-keyword">from</span> (
  <span class="hljs-keyword">select</span> features, label
  <span class="hljs-keyword">from</span> xgb_input
  cluster <span class="hljs-keyword">by</span> <span class="hljs-keyword">rand</span>(<span class="hljs-number">43</span>) <span class="hljs-comment">-- shuffle</span>
) shuffled;
</code></pre>
</li>
<li><p><code>xgboost_batch_predict(PRIMITIVE rowid, array&lt;string|double&gt; features, string model_id, array&lt;string&gt; pred_model [, string options])</code> - Returns a prediction result as (string rowid, array&lt;double&gt; predicted)</p>
<pre><code class="lang-sql"><span class="hljs-keyword">select</span>
  <span class="hljs-keyword">rowid</span>, 
  array_avg(predicted) <span class="hljs-keyword">as</span> predicted,
  <span class="hljs-keyword">avg</span>(predicted[<span class="hljs-number">0</span>]) <span class="hljs-keyword">as</span> predicted0
<span class="hljs-keyword">from</span> (
  <span class="hljs-keyword">select</span>
    xgboost_batch_predict(<span class="hljs-keyword">rowid</span>, features, model_id, <span class="hljs-keyword">model</span>) <span class="hljs-keyword">as</span> (<span class="hljs-keyword">rowid</span>, predicted)
  <span class="hljs-keyword">from</span>
    xgb_model l
    <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> xgb_input r
) t
<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> <span class="hljs-keyword">rowid</span>;
</code></pre>
</li>
<li><p><code>xgboost_predict(PRIMITIVE rowid, array&lt;string|double&gt; features, string model_id, array&lt;string&gt; pred_model [, string options])</code> - Returns a prediction result as (string rowid, array&lt;double&gt; predicted)</p>
<pre><code class="lang-sql"><span class="hljs-keyword">select</span>
  <span class="hljs-keyword">rowid</span>, 
  array_avg(predicted) <span class="hljs-keyword">as</span> predicted,
  <span class="hljs-keyword">avg</span>(predicted[<span class="hljs-number">0</span>]) <span class="hljs-keyword">as</span> predicted0
<span class="hljs-keyword">from</span> (
  <span class="hljs-keyword">select</span>
    xgboost_predict(<span class="hljs-keyword">rowid</span>, features, model_id, <span class="hljs-keyword">model</span>) <span class="hljs-keyword">as</span> (<span class="hljs-keyword">rowid</span>, predicted)
  <span class="hljs-keyword">from</span>
    xgb_model l
    <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> xgb_input r
) t
<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> <span class="hljs-keyword">rowid</span>;
</code></pre>
</li>
<li><p><code>xgboost_predict_one(PRIMITIVE rowid, array&lt;string|double&gt; features, string model_id, array&lt;string&gt; pred_model [, string options])</code> - Returns a prediction result as (string rowid, double predicted)</p>
<pre><code class="lang-sql"><span class="hljs-keyword">select</span>
  <span class="hljs-keyword">rowid</span>, 
  <span class="hljs-keyword">avg</span>(predicted) <span class="hljs-keyword">as</span> predicted
<span class="hljs-keyword">from</span> (
  <span class="hljs-keyword">select</span>
    xgboost_predict_one(<span class="hljs-keyword">rowid</span>, features, model_id, <span class="hljs-keyword">model</span>) <span class="hljs-keyword">as</span> (<span class="hljs-keyword">rowid</span>, predicted)
  <span class="hljs-keyword">from</span>
    xgb_model l
    <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> xgb_input r
) t
<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> <span class="hljs-keyword">rowid</span>;
</code></pre>
</li>
<li><p><code>xgboost_predict_triple(PRIMITIVE rowid, array&lt;string|double&gt; features, string model_id, array&lt;string&gt; pred_model [, string options])</code> - Returns a prediction result as (string rowid, string label, double probability)</p>
<pre><code class="lang-sql"><span class="hljs-keyword">select</span>
  <span class="hljs-keyword">rowid</span>,
  label,
  <span class="hljs-keyword">avg</span>(prob) <span class="hljs-keyword">as</span> prob
<span class="hljs-keyword">from</span> (
  <span class="hljs-keyword">select</span>
    xgboost_predict_triple(<span class="hljs-keyword">rowid</span>, features, model_id, <span class="hljs-keyword">model</span>) <span class="hljs-keyword">as</span> (<span class="hljs-keyword">rowid</span>, label, prob)
  <span class="hljs-keyword">from</span>
    xgb_model l
    <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> xgb_input r
) t
<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> <span class="hljs-keyword">rowid</span>, label;
</code></pre>
</li>
<li><p><code>xgboost_version()</code> - Returns the version of xgboost</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> xgboost_version();
</code></pre>
</li>
</ul>
<h1 id="term-vector-model">Term Vector Model</h1>
<ul>
<li><p><code>bm25(double termFrequency, int docLength, double avgDocLength, int numDocs, int numDocsWithTerm [, const string options])</code> - Return an Okapi BM25 score in double. Refer <a href="http://hivemall.incubator.apache.org/userguide/ft_engineering/bm25.html" target="_blank">http://hivemall.incubator.apache.org/userguide/ft_engineering/bm25.html</a> for usage</p>
</li>
<li><p><code>tf(string text)</code> - Return a term frequency in &lt;string, float&gt;</p>
</li>
<li><p><code>tfidf(double termFrequency, long numDocs, const long totalNumDocs)</code> - Return a smoothed TFIDF score in double.</p>
</li>
</ul>
<h1 id="nlp">NLP</h1>
<ul>
<li><p><code>stoptags_exclude(array&lt;string&gt; excludeTags, [, const string lang=&apos;ja&apos;])</code> - Returns stoptags excluding given tags</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> stoptags_exclude(<span class="hljs-built_in">array</span>(<span class="hljs-string">&apos;&#x540D;&#x8A5E;-&#x56FA;&#x6709;&#x540D;&#x8A5E;&apos;</span>, <span class="hljs-string">&apos;&#x5F62;&#x5BB9;&#x8A5E;&apos;</span>))
</code></pre>
</li>
<li><p><code>tokenize_cn(String line [, const list&lt;string&gt; stopWords])</code> - returns tokenized strings in array&lt;string&gt;</p>
</li>
<li><p><code>tokenize_ja(String line [, const string mode = &quot;normal&quot;, const array&lt;string&gt; stopWords, const array&lt;string&gt; stopTags, const array&lt;string&gt; userDict (or string userDictURL)</code>]) - returns tokenized strings in array&lt;string&gt;</p>
<pre><code class="lang-sql">select tokenize_ja(&quot;kuromoji&#x3092;&#x4F7F;&#x3063;&#x305F;&#x5206;&#x304B;&#x3061;&#x66F8;&#x304D;&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x3067;&#x3059;&#x3002;&#x7B2C;&#x4E8C;&#x5F15;&#x6570;&#x306B;&#x306F;normal/search/extended&#x3092;&#x6307;&#x5B9A;&#x3067;&#x304D;&#x307E;&#x3059;&#x3002;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x3067;&#x306F;normal&#x30E2;&#x30FC;&#x30C9;&#x3067;&#x3059;&#x3002;&quot;);

&gt; [&quot;kuromoji&quot;,&quot;&#x4F7F;&#x3046;&quot;,&quot;&#x5206;&#x304B;&#x3061;&#x66F8;&#x304D;&quot;,&quot;&#x30C6;&#x30B9;&#x30C8;&quot;,&quot;&#x7B2C;&quot;,&quot;&#x4E8C;&quot;,&quot;&#x5F15;&#x6570;&quot;,&quot;normal&quot;,&quot;search&quot;,&quot;extended&quot;,&quot;&#x6307;&#x5B9A;&quot;,&quot;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&quot;,&quot;normal&quot;,&quot; &#x30E2;&#x30FC;&#x30C9;&quot;]
</code></pre>
</li>
<li><p><code>tokenize_ja_neologd(String line [, const string mode = &quot;normal&quot;, const array&lt;string&gt; stopWords, const array&lt;string&gt; stopTags, const array&lt;string&gt; userDict (or string userDictURL)</code>]) - returns tokenized strings in array&lt;string&gt;</p>
<pre><code class="lang-sql">select tokenize_ja_neologd(&quot;kuromoji&#x3092;&#x4F7F;&#x3063;&#x305F;&#x5206;&#x304B;&#x3061;&#x66F8;&#x304D;&#x306E;&#x30C6;&#x30B9;&#x30C8;&#x3067;&#x3059;&#x3002;&#x7B2C;&#x4E8C;&#x5F15;&#x6570;&#x306B;&#x306F;normal/search/extended&#x3092;&#x6307;&#x5B9A;&#x3067;&#x304D;&#x307E;&#x3059;&#x3002;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x3067;&#x306F;normal&#x30E2;&#x30FC;&#x30C9;&#x3067;&#x3059;&#x3002;&quot;);

&gt; [&quot;kuromoji&quot;,&quot;&#x4F7F;&#x3046;&quot;,&quot;&#x5206;&#x304B;&#x3061;&#x66F8;&#x304D;&quot;,&quot;&#x30C6;&#x30B9;&#x30C8;&quot;,&quot;&#x7B2C;&quot;,&quot;&#x4E8C;&quot;,&quot;&#x5F15;&#x6570;&quot;,&quot;normal&quot;,&quot;search&quot;,&quot;extended&quot;,&quot;&#x6307;&#x5B9A;&quot;,&quot;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&quot;,&quot;normal&quot;,&quot; &#x30E2;&#x30FC;&#x30C9;&quot;]
</code></pre>
</li>
</ul>
<h1 id="others">Others</h1>
<ul>
<li><p><code>hivemall_version()</code> - Returns the version of Hivemall</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> hivemall_version();
</code></pre>
</li>
<li><p><code>lr_datagen(options string)</code> - Generates a logistic regression dataset</p>
<pre><code class="lang-sql">WITH dual AS (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span>) <span class="hljs-keyword">SELECT</span> lr_datagen(<span class="hljs-string">&apos;-n_examples 1k -n_features 10&apos;</span>) <span class="hljs-keyword">FROM</span> dual;
</code></pre>
</li>
<li><p><code>bm25(double termFrequency, int docLength, double avgDocLength, int numDocs, int numDocsWithTerm [, const string options])</code> - Return an Okapi BM25 score in double. Refer <a href="http://hivemall.incubator.apache.org/userguide/ft_engineering/bm25.html" target="_blank">http://hivemall.incubator.apache.org/userguide/ft_engineering/bm25.html</a> for usage</p>
</li>
<li><p><code>tf(string text)</code> - Return a term frequency in &lt;string, float&gt;</p>
</li>
<li><p><code>tfidf(double termFrequency, long numDocs, const long totalNumDocs)</code> - Return a smoothed TFIDF score in double.</p>
</li>
</ul>
<p><div id="page-footer" class="localized-footer"><hr><!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
<p><sub><font color="gray">
Apache Hivemall is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator.
</font></sub></p>
</div></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            

        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"List of Functions","level":"1.3","depth":1,"next":{"title":"Tips for Effective Hivemall","level":"1.4","depth":1,"path":"tips/README.md","ref":"tips/README.md","articles":[{"title":"Explicit add_bias() for better prediction","level":"1.4.1","depth":2,"path":"tips/addbias.md","ref":"tips/addbias.md","articles":[]},{"title":"Use rand_amplify() to better prediction results","level":"1.4.2","depth":2,"path":"tips/rand_amplify.md","ref":"tips/rand_amplify.md","articles":[]},{"title":"Real-time prediction on RDBMS","level":"1.4.3","depth":2,"path":"tips/rt_prediction.md","ref":"tips/rt_prediction.md","articles":[]},{"title":"Ensemble learning for stable prediction","level":"1.4.4","depth":2,"path":"tips/ensemble_learning.md","ref":"tips/ensemble_learning.md","articles":[]},{"title":"Mixing models for a better prediction convergence (MIX server)","level":"1.4.5","depth":2,"path":"tips/mixserver.md","ref":"tips/mixserver.md","articles":[]},{"title":"Run Hivemall on Amazon Elastic MapReduce","level":"1.4.6","depth":2,"path":"tips/emr.md","ref":"tips/emr.md","articles":[]}]},"previous":{"title":"Input Format","level":"1.2.3","depth":2,"path":"getting_started/input-format.md","ref":"getting_started/input-format.md","articles":[]},"dir":"ltr"},"config":{"plugins":["theme-api","edit-link","github","splitter","etoc","callouts","toggle-chapters","anchorjs","codeblock-filename","expandable-chapters","multipart","codeblock-filename","katex","emphasize","localized-footer"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"emphasize":{},"callouts":{},"etoc":{"h2lb":3,"header":1,"maxdepth":3,"mindepth":1,"notoc":true},"github":{"url":"https://github.com/apache/incubator-hivemall/"},"splitter":{},"search":{},"downloadpdf":{"base":"https://github.com/apache/incubator-hivemall/docs/gitbook","label":"PDF","multilingual":false},"multipart":{},"localized-footer":{"filename":"FOOTER.md","hline":"true"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2,"font":"sans"},"highlight":{},"codeblock-filename":{},"theme-api":{"languages":[],"split":false,"theme":"dark"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit","base":"https://github.com/apache/incubator-hivemall/tree/master/docs/gitbook"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchorjs":{"selector":"h1,h2,h3,*:not(.callout) > h4,h5"},"toggle-chapters":{},"expandable-chapters":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Hivemall User Manual","links":{"sidebar":{"<i class=\"fa fa-home\"></i> Home":"https://hivemall.incubator.apache.org/"}},"gitbook":"3.x.x","description":"User Manual for Apache Hivemall"},"file":{"path":"misc/funcs.md","mtime":"2021-04-22T11:42:38.139Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-04-22T11:56:59.644Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-etoc/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-toggle-chapters/toggle.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-api/theme-api.js"></script>
        
    

    </body>
</html>

